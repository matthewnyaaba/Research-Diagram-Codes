<!DOCTYPE html>
<html>
<head>
    <title>High-Resolution Workflow Diagram</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: white;
            font-family: Arial, sans-serif;
        }
        #diagram-container {
            text-align: center;
        }
        #download-btn {
            margin: 20px;
            padding: 12px 24px;
            background: #007cba;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        #download-btn:hover {
            background: #005a87;
        }
        #high-res-svg {
            border: 1px solid #ddd;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div id="diagram-container">
        <h2>High-Resolution Workflow Diagram</h2>
        <p>Click the button below to download as high-resolution PNG (300 DPI, publication quality)</p>
        
        <svg id="high-res-svg" width="2100" height="1800" viewBox="0 0 700 600" xmlns="http://www.w3.org/2000/svg">
            <defs>
                <style>
                    .step-box {
                        fill: white;
                        stroke: black;
                        stroke-width: 2;
                    }
                    .connecting-line {
                        stroke: black;
                        stroke-width: 2;
                        fill: none;
                    }
                    .arrow-line {
                        stroke: black;
                        stroke-width: 1.5;
                        fill: none;
                        marker-end: url(#arrowhead);
                    }
                    .step-number {
                        font-family: "Times New Roman", serif;
                        font-size: 16px;
                        font-weight: bold;
                        text-anchor: middle;
                        fill: black;
                    }
                    .process-label {
                        font-family: "Times New Roman", serif;
                        font-size: 11px;
                        text-anchor: middle;
                        fill: black;
                    }
                    .description-text {
                        font-family: "Times New Roman", serif;
                        font-size: 12px;
                        text-anchor: start;
                        fill: black;
                    }
                    .description-bold {
                        font-family: "Times New Roman", serif;
                        font-size: 12px;
                        font-weight: bold;
                        text-anchor: start;
                        fill: black;
                    }
                </style>
                <marker id="arrowhead" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
                    <polygon points="0 0, 8 3, 0 6" fill="black"/>
                </marker>
            </defs>

            <rect width="100%" height="100%" fill="white"/>
            <line x1="350" y1="80" x2="350" y2="400" class="connecting-line"/>

            <!-- Step 1 -->
            <rect x="325" y="50" width="50" height="30" class="step-box"/>
            <text x="350" y="70" class="step-number">1</text>
            <text x="160" y="70" class="process-label">User Input Collection</text>
            <line x1="210" y1="65" x2="325" y2="65" class="arrow-line"/>
            <text x="400" y="60" class="description-bold">User provides lesson</text>
            <text x="400" y="75" class="description-text">parameters and cultural context</text>

            <!-- Step 2 -->
            <rect x="325" y="120" width="50" height="30" class="step-box"/>
            <text x="350" y="140" class="step-number">2</text>
            <text x="160" y="140" class="process-label">Parameter Processing</text>
            <line x1="210" y1="135" x2="325" y2="135" class="arrow-line"/>
            <text x="400" y="125" class="description-bold">System processes input</text>
            <text x="400" y="140" class="description-text">and constructs culturally</text>
            <text x="400" y="155" class="description-text">responsive prompts</text>

            <!-- Step 3 -->
            <rect x="325" y="190" width="50" height="30" class="step-box"/>
            <text x="350" y="210" class="step-number">3</text>
            <text x="160" y="210" class="process-label">OpenAI API Call</text>
            <line x1="210" y1="205" x2="325" y2="205" class="arrow-line"/>
            <text x="400" y="195" class="description-bold">GPT-4o generates lesson</text>
            <text x="400" y="210" class="description-text">plan based on prompts</text>

            <!-- Step 4 -->
            <rect x="325" y="260" width="50" height="30" class="step-box"/>
            <text x="350" y="280" class="step-number">4</text>
            <text x="160" y="280" class="process-label">Lesson Plan Generation</text>
            <line x1="210" y1="275" x2="325" y2="275" class="arrow-line"/>
            <text x="400" y="265" class="description-bold">GPT-4o creates lesson</text>
            <text x="400" y="280" class="description-text">plan with cultural elements</text>

            <!-- Step 5 -->
            <rect x="325" y="330" width="50" height="30" class="step-box"/>
            <text x="350" y="350" class="step-number">5</text>
            <text x="160" y="350" class="process-label">Word Document Creation</text>
            <line x1="210" y1="345" x2="325" y2="345" class="arrow-line"/>
            <text x="400" y="335" class="description-bold">System formats lesson</text>
            <text x="400" y="350" class="description-text">plan into a teacher-ready</text>
            <text x="400" y="365" class="description-text">document</text>

            <!-- Step 6 -->
            <rect x="325" y="400" width="50" height="30" class="step-box"/>
            <text x="350" y="420" class="step-number">6</text>
            <text x="160" y="420" class="process-label">Final Lesson Plan</text>
            <line x1="210" y1="415" x2="325" y2="415" class="arrow-line"/>
            <text x="400" y="405" class="description-bold">Teacher receives</text>
            <text x="400" y="420" class="description-text">complete, culturally</text>
            <text x="400" y="435" class="description-text">responsive lesson plan</text>
        </svg>

        <br>
        <button id="download-btn" onclick="downloadHighResPNG()">Download High-Resolution PNG (300 DPI)</button>
        
        <p><strong>Alternative:</strong> Right-click the diagram above and "Save image as..." to get the SVG version (recommended for publications)</p>
    </div>

    <script>
        function downloadHighResPNG() {
            const svg = document.getElementById('high-res-svg');
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            
            // Set high resolution (300 DPI equivalent)
            canvas.width = 2100;  // 7 inches * 300 DPI
            canvas.height = 1800; // 6 inches * 300 DPI
            
            const data = new XMLSerializer().serializeToString(svg);
            const img = new Image();
            
            img.onload = function() {
                ctx.fillStyle = 'white';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                
                const link = document.createElement('a');
                link.download = 'workflow_diagram_300dpi.png';
                link.href = canvas.toDataURL('image/png');
                link.click();
            };
            
            img.src = 'data:image/svg+xml;base64,' + btoa(unescape(encodeURIComponent(data)));
        }
    </script>
</body>
</html>
